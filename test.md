# 기능 테스트 가이드

이 문서는 학교 출석 관리 시스템의 모든 기능에 대한 테스트 방법을 설명합니다.


## 목차

1. [인증 (Authentication)](#1-인증-authentication)
2. [관리자 기능 (Admin)](#2-관리자-기능-admin)
3. [교원 기능 (Instructor)](#3-교원-기능-instructor)
4. [학생 기능 (Student)](#4-학생-기능-student)
5. [알림 시스템 (Notifications)](#5-알림-시스템-notifications)


## 1. 인증 (Authentication)

### 1.1 로그인

**테스트 계정:**
| 역할 | 아이디 | 비밀번호 |
|------|--------|----------|
| 관리자 | `admin` | `admin` |
| 교원 | `inst001` ~ `inst011` | `password` |
| 학생 (4학년) | `202021001` ~ `202021005` | `password` |
| 학생 (3학년) | `202121001` ~ `202121005` | `password` |
| 학생 (2학년) | `202221001` ~ `202221005` | `password` |
| 학생 (1학년) | `202321001` ~ `202321005` | `password` |

**테스트 방법:**
1. http://localhost:5173 접속
2. 로그인 페이지에서 아이디/비밀번호 입력
3. "로그인" 버튼 클릭
4. 역할에 맞는 대시보드로 이동 확인

**쿠키 유지 테스트:**
1. 로그인 후 브라우저 새로고침 (F5)
2. 로그인 상태가 유지되는지 확인

### 1.2 로그아웃

**테스트 방법:**
1. 상단 메뉴에서 사용자 이름 클릭
2. "로그아웃" 버튼 클릭
3. 로그인 페이지로 이동 확인


## 2. 관리자 기능 (Admin)

> 관리자 계정(`admin`/`admin`)으로 로그인 후 테스트

### 2.1 사용자 관리

**사용자 목록 조회:**
1. 관리자 대시보드 → "사용자 관리" 메뉴 클릭
2. 전체 사용자 목록 확인 (교원, 학생 포함)

**사용자 등록:**
1. "사용자 추가" 버튼 클릭
2. 사용자 정보 입력:
   - 학번/교번
   - 이름
   - 이메일
   - 역할 (student/instructor/admin)
   - 비밀번호
3. "등록" 버튼 클릭
4. 목록에 새 사용자 표시 확인

**사용자 수정:**
1. 사용자 목록에서 수정할 사용자의 "수정" 버튼 클릭
2. 정보 수정 후 "저장" 클릭

### 2.2 학기 관리

**학기 목록 조회:**
1. 관리자 대시보드 → "학기 관리" 메뉴 클릭
2. 등록된 학기 목록 확인

**학기 생성:**
1. "학기 추가" 버튼 클릭
2. 학기 정보 입력:
   - 이름 (예: "2025년 2학기")
   - 시작일
   - 종료일
3. "등록" 버튼 클릭

### 2.3 강의 관리

**강의 목록 조회:**
1. 관리자 대시보드 → "강의 관리" 메뉴 클릭
2. 전체 강의 목록 확인

**강의 개설:**
1. "강의 추가" 버튼 클릭
2. 강의 정보 입력:
   - 강의명
   - 학기 선택
   - 담당 교원 선택
   - 강의실
   - 요일/시간
3. "등록" 버튼 클릭

**수강생 등록 (엑셀 업로드 또는 수동):**
1. 강의 상세 → "수강생 관리" 탭
2. 수강생 추가 또는 엑셀 파일 업로드

### 2.4 감사 로그 조회

**테스트 방법:**
1. 관리자 대시보드 → "감사 로그" 메뉴 클릭
2. 시스템 이벤트 로그 확인:
   - 출석 변경 기록
   - 공결 승인/반려 기록
   - 사용자 생성/수정 기록
3. 필터 기능으로 특정 이벤트 검색


## 3. 교원 기능 (Instructor)

> 교원 계정(`inst001`/`password`)으로 로그인 후 테스트

### 3.1 담당 강의 확인

**테스트 방법:**
1. 교원 대시보드에서 담당 강의 목록 확인
2. 강의 클릭하여 상세 정보 확인

### 3.2 출석 세션 관리

#### 출석 방식 설정

시스템은 3가지 출석 방식을 지원합니다:

| 방식 | 설명 |
|------|------|
| 전자출결 (electronic) | 학생이 직접 출석 버튼 클릭 |
| 인증번호 (code) | 교원이 생성한 코드 입력 |
| 호명 (rollcall) | 교원이 직접 학생 이름 호명하며 출석 처리 |

#### 출석 열기 (전자출결)

**테스트 방법:**
1. 담당 강의 상세 페이지 이동
2. "출석 시작" 버튼 클릭
3. 출석 방식: "전자출결" 선택
4. 출석 유효 시간 설정 (예: 10분)
5. "출석 열기" 클릭
6. 출석 세션 활성화 확인

#### 출석 열기 (인증번호)

**테스트 방법:**
1. 담당 강의 상세 페이지 이동
2. "출석 시작" 버튼 클릭
3. 출석 방식: "인증번호" 선택
4. 시스템이 생성한 인증번호 확인 (예: `A1B2C3`)
5. 학생들에게 인증번호 공유
6. 출석 세션 활성화 확인

#### 출석 열기 (호명)

**테스트 방법:**
1. 담당 강의 상세 페이지 이동
2. "출석 시작" 버튼 클릭
3. 출석 방식: "호명" 선택
4. 수강생 명단이 표시됨
5. 각 학생 이름 옆 출석 상태 선택:
   - 출석 / 지각 / 결석
6. 모든 학생 처리 후 "출석 마감" 클릭

#### 출석 마감

**테스트 방법:**
1. 활성화된 출석 세션에서 "출석 마감" 버튼 클릭
2. 미체크 학생은 자동으로 "결석" 처리됨
3. 결석 2회/3회 학생에게 자동 알림 발송 확인

#### 출석 현황 확인

**테스트 방법:**
1. 강의 상세 → "출석 현황" 탭
2. 주차별/학생별 출석 현황 확인
3. 출석률 통계 확인

### 3.3 공결 승인/반려

**테스트 방법:**
1. 교원 대시보드 → "공결 요청" 메뉴 클릭
2. 대기 중인 공결 요청 목록 확인
3. 요청 클릭하여 상세 확인:
   - 학생 정보
   - 사유
   - 증빙 파일 (이미지 미리보기)
4. "승인" 또는 "반려" 버튼 클릭
5. 반려 시 사유 입력
6. 처리 완료 후 학생에게 알림 발송 확인

### 3.4 이의 신청 처리

**테스트 방법:**
1. 교원 대시보드 → "이의 신청" 메뉴 클릭
2. 대기 중인 이의 신청 목록 확인
3. 이의 내용 검토
4. 출석 정정이 필요한 경우:
   - "승인" 클릭
   - 변경할 출석 상태 선택
5. 정정 불가한 경우:
   - "반려" 클릭
   - 반려 사유 입력
6. 처리 결과가 감사 로그에 기록되는지 확인

### 3.5 강의 공지 작성

**테스트 방법:**
1. 담당 강의 상세 페이지 이동
2. "공지 작성" 버튼 클릭
3. 공지 내용 입력
4. "등록" 버튼 클릭
5. 수강생 전체에게 알림 발송 확인

### 3.6 수업 공강 투표 생성

**테스트 방법:**
1. 담당 강의 상세 페이지 이동
2. "투표 생성" 버튼 클릭
3. 투표 정보 입력:
   - 제목 (예: "10주차 공강 여부")
   - 설명
   - 투표 마감일
4. "등록" 버튼 클릭
5. 수강생들에게 투표 알림 발송 확인

### 3.7 메시지 작성 (개인)

**테스트 방법:**
1. 담당 강의 상세 → "수강생" 탭
2. 메시지 보낼 학생 선택
3. "메시지 보내기" 버튼 클릭
4. 메시지 내용 입력 후 전송
5. 학생 계정으로 로그인하여 메시지 수신 확인

## 4. 학생 기능 (Student)

> 학생 계정(`20200001`/`password`)으로 로그인 후 테스트

### 4.1 수강 강의 확인

**테스트 방법:**
1. 학생 대시보드에서 수강 중인 강의 목록 확인
2. 강의 클릭하여 상세 정보 확인

### 4.2 출석 체크

#### 전자출결 방식

**테스트 방법:**
1. 교원이 출석을 연 상태에서 테스트
2. 학생 대시보드 → 해당 강의 선택
3. "출석하기" 버튼 표시 확인
4. "출석하기" 버튼 클릭
5. 출석 완료 메시지 확인
6. 출석 현황에서 "출석" 상태 확인

#### 인증번호 방식

**테스트 방법:**
1. 교원이 인증번호 방식으로 출석을 연 상태에서 테스트
2. 학생 대시보드 → 해당 강의 선택
3. 인증번호 입력 필드 표시 확인
4. 교원에게 받은 인증번호 입력
5. "출석하기" 버튼 클릭
6. 출석 완료 메시지 확인

#### 지각 처리

**테스트 방법:**
1. 출석 시간이 일부 경과한 후 출석 체크
2. 자동으로 "지각"으로 기록되는지 확인

### 4.3 출석 현황 확인

**테스트 방법:**
1. 학생 대시보드 → "출석 현황" 메뉴 클릭
2. 과목별 출석 현황 확인:
   - 출석/지각/결석/공결 횟수
   - 출석률
3. 주차별 상세 출석 기록 확인

### 4.4 공결 신청

**테스트 방법:**
1. 학생 대시보드 → "공결 신청" 메뉴 클릭
2. "새 공결 신청" 버튼 클릭
3. 신청 정보 입력:
   - 과목 선택
   - 날짜 선택
   - 사유 선택 (가족 경조사, 병원 진료, 학교 행사 등)
   - 상세 사유 입력
4. 증빙 파일 업로드:
   - 이미지 파일 (jpg, png)
   - 문서 파일 (docx, pdf)
5. "신청" 버튼 클릭
6. 신청 완료 확인 및 목록에 표시 확인

**신청 상태 확인:**
1. "공결 신청" 메뉴에서 내 신청 목록 확인
2. 상태 확인: 대기중/승인/반려

### 4.5 이의 신청

**테스트 방법:**
1. 출석 현황에서 이의 신청할 출석 기록 선택
2. "이의 신청" 버튼 클릭
3. 이의 내용 작성:
   - 정정 요청 상태 (예: 결석 → 출석)
   - 사유 설명
4. "신청" 버튼 클릭
5. 신청 완료 확인

**신청 상태 확인:**
1. "이의 신청" 메뉴에서 내 신청 목록 확인
2. 처리 결과 확인

### 4.6 메시지 작성 (교원에게)

**테스트 방법:**
1. 학생 대시보드 → "메시지" 메뉴 클릭
2. "새 메시지" 버튼 클릭
3. 받는 사람: 담당 교원 선택
4. 메시지 내용 입력
5. "보내기" 클릭
6. 보낸 메시지함에서 확인

**메시지 수신 확인:**
1. 받은 메시지함에서 교원 메시지 확인
2. 메시지 읽기 및 답장

### 4.7 투표 참여

**테스트 방법:**
1. 알림 또는 강의 상세에서 투표 확인
2. 투표 클릭하여 상세 확인
3. 찬성/반대 선택
4. "투표하기" 클릭
5. 투표 완료 확인 (중복 투표 불가)

## 5. 알림 시스템 (Notifications)

### 5.1 알림 유형

| 알림 유형 | 발생 조건 | 수신자 |
|-----------|-----------|--------|
| 출석 오픈 | 교원이 출석 시작 | 해당 강의 수강생 |
| 출석 마감 | 교원이 출석 마감 | 해당 강의 수강생 |
| 공결 결과 | 공결 승인/반려 시 | 신청 학생 |
| 이의 결과 | 이의 처리 시 | 신청 학생 |
| 강의 공지 | 교원 공지 작성 | 해당 강의 수강생 전체 |
| 투표 알림 | 교원 투표 생성 | 해당 강의 수강생 전체 |
| 결석 경고 (2회) | 2회 결석 시 | 해당 학생 |
| 결석 위험 (3회) | 3회 결석 시 | 해당 학생 |

### 5.2 알림 확인

**테스트 방법:**
1. 상단 메뉴 알림 아이콘 클릭
2. 읽지 않은 알림 목록 확인
3. 알림 클릭하여 상세 내용 확인
4. 관련 페이지로 이동

### 5.3 결석 경고 알림 테스트

**테스트 시나리오:**
1. 교원 계정으로 로그인
2. 특정 학생을 2회 결석 처리
3. 해당 학생 계정으로 로그인
4. 알림에서 "2회 결석 경고" 메시지 확인

**3회 결석 위험 테스트:**
1. 동일 학생을 3회 결석 처리
2. 알림에서 "3회 결석 위험" 메시지 확인


## 6. 통합 테스트 시나리오

### 시나리오 1: 일반 출석 흐름

1. **교원** (`inst001`/`password`) 로그인
2. 담당 강의 선택 → "출석 시작" (전자출결)
3. **학생** (`20200001`/`password`) 로그인
4. 해당 강의 → "출석하기" 클릭
5. **교원** 계정에서 출석 현황 확인
6. "출석 마감" 클릭
7. 미출석 학생 결석 처리 확인

### 시나리오 2: 공결 신청 흐름

1. **학생** 로그인 → 공결 신청 (증빙 파일 첨부)
2. **교원** 로그인 → 공결 요청 확인
3. 증빙 파일 확인 후 승인/반려
4. **학생** 로그인 → 알림 확인 → 결과 확인

### 시나리오 3: 이의 신청 흐름

1. **학생** 로그인 → 출석 현황에서 이의 신청
2. **교원** 로그인 → 이의 신청 확인
3. 검토 후 승인 (출석 정정)
4. **관리자** 로그인 → 감사 로그에서 변경 기록 확인

### 시나리오 4: 투표 흐름

1. **교원** 로그인 → 투표 생성 (공강 여부)
2. **학생** 로그인 → 알림 확인 → 투표 참여
3. **교원** 로그인 → 투표 결과 확인


## 7. 문제 해결

### 로그인이 안 되는 경우

1. Docker 컨테이너 상태 확인: `docker compose ps`
2. 백엔드 로그 확인: `docker compose logs backend`
3. 데이터베이스 연결 확인: `docker compose logs mysql`

### 출석 버튼이 보이지 않는 경우

1. 교원이 출석 세션을 시작했는지 확인
2. 출석 유효 시간이 지나지 않았는지 확인
3. 해당 강의 수강생으로 등록되어 있는지 확인

### 파일 업로드가 안 되는 경우

1. 파일 크기 제한 확인 (최대 10MB)
2. 허용된 파일 형식 확인 (jpg, png, pdf, docx)
3. 백엔드 uploads 폴더 권한 확인

## API 엔드포인트

### 인증
- `POST /api/auth/login` - 로그인
- `POST /api/auth/logout` - 로그아웃
- `GET /api/auth/me` - 현재 사용자 정보

### 강의
- `GET /api/courses` - 강의 목록
- `GET /api/courses/:id` - 강의 상세
- `POST /api/courses/:id/announcements` - 강의 공지 (교원)

### 출석
- `POST /api/sessions/course/:courseId` - 출석 세션 생성 (교원)
- `POST /api/sessions/:sessionId/check-in` - 출석 체크 (학생)
- `POST /api/sessions/:sessionId/roll-call` - 호명 출석 (교원)
- `POST /api/sessions/:sessionId/close` - 출석 마감 (교원)

### 공결/이의
- `POST /api/excuses` - 공결 신청 (학생)
- `PATCH /api/excuses/:id` - 공결 처리 (교원)
- `POST /api/appeals` - 이의 신청 (학생)
- `PATCH /appeals/:id` - 이의 처리 (교원)